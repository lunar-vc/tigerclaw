# Tigerclaw tmux config — orange/amber themed
# Loaded via: tmux -f scripts/tmux.conf new-session ...
# Path-dependent bindings (popups, menus) are set in tigerclaw-launch.sh

# --- Prefix ---
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# --- General ---
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
set -g mouse on
set -g history-limit 50000
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -s escape-time 0
set -g focus-events on
set -g display-time 3000

# --- Navigation (Mac-friendly) ---
# Alt+arrow pane switching (no prefix needed)
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# macOS fallback: Option+arrows send \eb/\ef in most Mac terminals
bind -n M-b select-pane -L
bind -n M-f select-pane -R

# User-keys for terminals that send CSI 1;9 (macOS Meta modifier)
set -s user-keys[0] "\e[1;9D"
set -s user-keys[1] "\e[1;9C"
set -s user-keys[2] "\e[1;9A"
set -s user-keys[3] "\e[1;9B"
bind -n User0 select-pane -L
bind -n User1 select-pane -R
bind -n User2 select-pane -U
bind -n User3 select-pane -D

# Prefix+arrow also works
bind Left select-pane -L
bind Right select-pane -R
bind Up select-pane -U
bind Down select-pane -D

# --- Splits (iTerm2-style) ---
# C-a d = split right, C-a D = split down
bind d split-window -h -c "#{pane_current_path}"
bind D split-window -v -c "#{pane_current_path}"
# Keep | and - as alternates
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# --- Tabs (windows) ---
bind t new-window -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
bind w confirm-before -p "Close pane? (y/n)" kill-pane
bind ] next-window
bind [ previous-window

# --- Pane management ---
bind z resize-pane -Z
bind x confirm-before -p "Close pane? (y/n)" kill-pane

# --- Resize (arrow keys, repeatable) ---
bind -r S-Left resize-pane -L 5
bind -r S-Right resize-pane -R 5
bind -r S-Up resize-pane -U 3
bind -r S-Down resize-pane -D 3

# --- Copy mode (Mac-style) ---
# Mouse select auto-copies to clipboard
setw -g mode-keys emacs
bind Enter copy-mode
bind -T copy-mode MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode Enter send -X copy-pipe-and-cancel "pbcopy"

# --- Status bar (orange/amber) ---
set -g status-position top
set -g status-interval 30
set -g status-style "bg=default,fg=white"
set -g status-left "#[fg=colour208,bold]  ╱╱╱ tigerclaw "
set -g status-left-length 25
set -g status-right "#[fg=colour8]C-a ? help · C-a d split  %H:%M · %b %d "
set -g status-right-length 45

# Window status
setw -g window-status-format " #[fg=colour8]#I:#W "
setw -g window-status-current-format " #[fg=colour214,bold]#I:#W "

# --- Pane borders ---
set -g pane-border-style "fg=colour8"
set -g pane-active-border-style "fg=colour208"
set -g pane-border-format " #[fg=colour214,bold]#{pane_title}#[default] "
set -g pane-border-status top

# --- Messages ---
set -g message-style "bg=default,fg=colour208"
